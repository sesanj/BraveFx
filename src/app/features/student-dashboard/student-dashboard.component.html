<div class="dashboard">
  <!-- Sidebar Navigation -->
  <app-sidebar [activeTab]="activeTab" (tabChange)="onTabChange($event)">
  </app-sidebar>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Top Bar -->
    <app-top-bar [user]="user" (settingsClick)="onSettingsClick()" (logoutClick)="onLogout()">
    </app-top-bar>

    <!-- Content Area -->
    <div class="content-area">
      <!-- Overview Tab -->
      <div class="tab-content" *ngIf="activeTab === 'overview'">
        <h1 class="page-title">Welcome back, {{ user.name.split(' ')[0] }}! ðŸ‘‹</h1>
        <p class="page-subtitle">Continue your learning journey</p>

        <!-- Stats Grid -->
        <app-stats-grid [stats]="stats"></app-stats-grid>

        <!-- Continue Learning -->
        <section class="section">
          <h2 class="section-title">Continue Learning</h2>
          <div class="courses-grid">
            <app-course-card *ngFor="let course of enrolledCourses.slice(0, 2)" [course]="course"
              (continue)="continueCourse($event)">
            </app-course-card>
          </div>
        </section>

        <!-- Recent Activity -->
        <section class="section">
          <h2 class="section-title">Recent Activity</h2>
          <app-activity-list [activities]="recentActivity"></app-activity-list>
        </section>
      </div>

      <!-- My Courses Tab -->
      <div class="tab-content" *ngIf="activeTab === 'courses'">
        <h1 class="page-title">My Courses</h1>
        <p class="page-subtitle">{{ enrolledCourses.length }} courses enrolled</p>

        <div class="courses-grid full">
          <app-course-card *ngFor="let course of enrolledCourses" [course]="course" (continue)="continueCourse($event)">
          </app-course-card>
        </div>
      </div>

      <!-- Progress Tab -->
      <!-- Progress Tab -->
      <div class="tab-content" *ngIf="activeTab === 'progress'">
        <h1 class="page-title">Learning Progress</h1>
        <p class="page-subtitle">Track your achievements and performance</p>

        <!-- Progress Overview Cards -->
        <div class="progress-overview">
          <div class="progress-stat-card">
            <div class="progress-stat-icon">
              <lucide-icon [img]="TrendingUp"></lucide-icon>
            </div>
            <div class="progress-stat-content">
              <p class="progress-stat-label">Overall Progress</p>
              <h3 class="progress-stat-value">{{ overallProgress }}%</h3>
              <div class="mini-progress-bar">
                <div class="mini-progress-fill" [style.width.%]="overallProgress"></div>
              </div>
            </div>
          </div>

          <div class="progress-stat-card">
            <div class="progress-stat-icon clock">
              <lucide-icon [img]="BookOpen"></lucide-icon>
            </div>
            <div class="progress-stat-content">
              <p class="progress-stat-label">Lessons Completed</p>
              <h3 class="progress-stat-value">{{ completedLessons }}</h3>
              <p class="progress-stat-sub">out of {{ totalLessons }} lessons</p>
            </div>
          </div>

          <div class="progress-stat-card">
            <div class="progress-stat-icon quiz">
              <lucide-icon [img]="Target"></lucide-icon>
            </div>
            <div class="progress-stat-content">
              <p class="progress-stat-label">Quiz Average</p>
              <h3 class="progress-stat-value">{{ quizAverage }}%</h3>
              <p class="progress-stat-sub">{{ completedQuizzes }} quizzes completed</p>
            </div>
          </div>
        </div>

        <!-- Course Progress Section -->
        <div class="progress-section">
          <div class="progress-section-header">
            <h2 class="progress-section-title">Course Progress</h2>
            <p class="progress-section-subtitle">Track your completion status for each course</p>
          </div>

          <div class="course-progress-list">
            <div class="course-progress-item" *ngFor="let course of courseProgress">
              <div class="course-progress-info">
                <div class="course-progress-icon" [style.background]="course.color">
                  {{ course.title.charAt(0) }}
                </div>
                <div class="course-progress-details">
                  <h4 class="course-progress-title">{{ course.title }}</h4>
                  <p class="course-progress-stats">
                    {{ course.completedLessons }}/{{ course.totalLessons }} lessons â€¢
                    {{ course.completedQuizzes }}/{{ course.totalQuizzes }} quizzes
                  </p>
                </div>
              </div>
              <div class="course-progress-bar-container">
                <div class="course-progress-bar">
                  <div class="course-progress-bar-fill" [style.width.%]="course.progress"
                    [style.background]="course.color"></div>
                </div>
                <span class="course-progress-percentage">{{ course.progress }}%</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Quiz Performance -->
        <div class="progress-section">
          <div class="progress-section-header">
            <h2 class="progress-section-title">Quiz Performance</h2>
            <p class="progress-section-subtitle">Your quiz scores and improvement trends</p>
          </div>

          <div class="quiz-performance-list">
            <div class="quiz-performance-item" *ngFor="let quiz of quizPerformance">
              <div class="quiz-performance-header">
                <div class="quiz-performance-info">
                  <h4 class="quiz-performance-title">{{ quiz.title }}</h4>
                  <p class="quiz-performance-course">{{ quiz.course }}</p>
                </div>
                <div class="quiz-performance-score" [class.excellent]="quiz.score >= 90"
                  [class.good]="quiz.score >= 70 && quiz.score < 90" [class.fair]="quiz.score < 70">
                  {{ quiz.score }}%
                </div>
              </div>
              <div class="quiz-performance-meta">
                <span class="quiz-performance-date">
                  <lucide-icon [img]="Calendar" [size]="14"></lucide-icon>
                  {{ quiz.date }}
                </span>
                <span class="quiz-performance-attempts">{{ quiz.attempts }} attempt{{ quiz.attempts > 1 ? 's' : ''
                  }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Community Tab -->
      <div class="tab-content" *ngIf="activeTab === 'community'">
        <h1 class="page-title">Join Our Community</h1>
        <p class="page-subtitle">Connect with traders, get support, and stay updated</p>

        <div class="community-grid">
          <!-- Discord Card -->
          <a [href]="communityLinks.discord" target="_blank" rel="noopener noreferrer" class="community-card discord">
            <div class="community-icon">
              <svg viewBox="0 0 24 24" fill="currentColor" width="32" height="32">
                <path
                  d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z" />
              </svg>
            </div>
            <div class="community-content">
              <h3 class="community-title">Discord Community</h3>
              <p class="community-description">Join our active Discord server for live discussions, Q&A sessions, and
                connect with fellow traders.</p>
              <span class="community-link">Join Discord Server â†’</span>
            </div>
          </a>

          <!-- YouTube Card -->
          <a [href]="communityLinks.youtube" target="_blank" rel="noopener noreferrer" class="community-card youtube">
            <div class="community-icon">
              <svg viewBox="0 0 24 24" fill="currentColor" width="32" height="32">
                <path
                  d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z" />
              </svg>
            </div>
            <div class="community-content">
              <h3 class="community-title">YouTube Channel</h3>
              <p class="community-description">Subscribe for trading tutorials, market analysis, course updates, and
                exclusive tips for traders.</p>
              <span class="community-link">Watch on YouTube â†’</span>
            </div>
          </a>

          <!-- Instagram Card -->
          <a [href]="communityLinks.instagram" target="_blank" rel="noopener noreferrer"
            class="community-card instagram">
            <div class="community-icon">
              <svg viewBox="0 0 24 24" fill="currentColor" width="32" height="32">
                <path
                  d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z" />
              </svg>
            </div>
            <div class="community-content">
              <h3 class="community-title">Instagram</h3>
              <p class="community-description">Follow us for daily trading tips, market insights, behind-the-scenes
                content, and quick updates.</p>
              <span class="community-link">Follow on Instagram â†’</span>
            </div>
          </a>
        </div>

        <!-- Community Info Section -->
        <div class="community-info">
          <div class="info-card">
            <div class="info-icon">
              <lucide-icon [img]="Users" [size]="24"></lucide-icon>
            </div>
            <div class="info-content">
              <h4>Active Community</h4>
              <p>Join thousands of traders learning and growing together</p>
            </div>
          </div>
          <div class="info-card">
            <div class="info-icon">
              <lucide-icon [img]="MessageCircle" [size]="24"></lucide-icon>
            </div>
            <div class="info-content">
              <h4>Get Support</h4>
              <p>Ask questions and get help from instructors and peers</p>
            </div>
          </div>
          <div class="info-card">
            <div class="info-icon">
              <lucide-icon [img]="TrendingUp" [size]="24"></lucide-icon>
            </div>
            <div class="info-content">
              <h4>Stay Updated</h4>
              <p>Get the latest market news and course announcements</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Settings Tab -->
      <div class="tab-content settings-tab" *ngIf="activeTab === 'settings'">
        <div class="settings-container">
          <h1 class="page-title">Settings</h1>
          <p class="page-subtitle">Manage your account and preferences</p>
          <!-- Profile Settings -->
          <section class="settings-section">
            <div class="settings-header">
              <lucide-icon [img]="User" [size]="24"></lucide-icon>
              <h2 class="settings-section-title">Profile Information</h2>
            </div>
            <div class="settings-card">
              <div class="avatar-section">
                <div class="avatar-large">
                  <lucide-icon [img]="User" [size]="48"></lucide-icon>
                </div>
                <button class="btn-secondary">Change Avatar</button>
              </div>

              <div class="settings-form">
                <div class="form-group">
                  <label>Full Name</label>
                  <input type="text" [value]="user.name" placeholder="Your full name" />
                </div>
                <div class="form-group">
                  <label>Email Address</label>
                  <input type="email" [value]="user.email" placeholder="your@email.com" />
                </div>
                <div class="form-group">
                  <label>Bio</label>
                  <textarea rows="3" placeholder="Tell us about yourself..."></textarea>
                </div>
                <button class="btn-primary">Save Changes</button>
              </div>
            </div>
          </section>

          <!-- Account Security -->
          <section class="settings-section">
            <div class="settings-header">
              <lucide-icon [img]="Lock" [size]="24"></lucide-icon>
              <h2 class="settings-section-title">Account Security</h2>
            </div>
            <div class="settings-card">
              <div class="settings-form">
                <div class="form-group">
                  <label>Current Password</label>
                  <input type="password" placeholder="Enter current password" />
                </div>
                <div class="form-group">
                  <label>New Password</label>
                  <input type="password" placeholder="Enter new password" />
                </div>
                <div class="form-group">
                  <label>Confirm New Password</label>
                  <input type="password" placeholder="Confirm new password" />
                </div>
                <button class="btn-primary">Update Password</button>
              </div>
            </div>
          </section>

          <!-- Preferences -->
          <section class="settings-section">
            <div class="settings-header">
              <lucide-icon [img]="Palette" [size]="24"></lucide-icon>
              <h2 class="settings-section-title">Preferences</h2>
            </div>
            <div class="settings-card">
              <div class="setting-item">
                <div class="setting-info">
                  <h4>Theme</h4>
                  <p>Choose your preferred color theme</p>
                </div>
                <div class="theme-selector">
                  <button class="theme-option" [class.active]="themeService.theme() === 'light'"
                    (click)="themeService.setTheme('light')">
                    <lucide-icon [img]="Sun" [size]="18"></lucide-icon>
                    <span>Light</span>
                  </button>
                  <button class="theme-option" [class.active]="themeService.theme() === 'dark'"
                    (click)="themeService.setTheme('dark')">
                    <lucide-icon [img]="Moon" [size]="18"></lucide-icon>
                    <span>Dark</span>
                  </button>
                </div>
              </div>

              <div class="setting-item">
                <div class="setting-info">
                  <h4>Language</h4>
                  <p>Select your preferred language</p>
                </div>
                <select class="select-input">
                  <option value="en">English</option>
                  <option value="es">EspaÃ±ol</option>
                  <option value="fr">FranÃ§ais</option>
                  <option value="de">Deutsch</option>
                </select>
              </div>

              <div class="setting-item">
                <div class="setting-info">
                  <h4>Timezone</h4>
                  <p>Set your local timezone</p>
                </div>
                <select class="select-input">
                  <option value="utc">UTC</option>
                  <option value="est">Eastern Time (EST)</option>
                  <option value="pst">Pacific Time (PST)</option>
                  <option value="gmt">GMT</option>
                </select>
              </div>
            </div>
          </section>

          <!-- Notifications -->
          <section class="settings-section">
            <div class="settings-header">
              <lucide-icon [img]="Bell" [size]="24"></lucide-icon>
              <h2 class="settings-section-title">Notifications</h2>
            </div>
            <div class="settings-card">
              <div class="setting-item">
                <div class="setting-info">
                  <h4>Email Notifications</h4>
                  <p>Receive updates about your courses via email</p>
                </div>
                <label class="toggle-switch">
                  <input type="checkbox" checked />
                  <span class="toggle-slider"></span>
                </label>
              </div>

              <div class="setting-item">
                <div class="setting-info">
                  <h4>Course Updates</h4>
                  <p>Get notified when new lessons are added</p>
                </div>
                <label class="toggle-switch">
                  <input type="checkbox" checked />
                  <span class="toggle-slider"></span>
                </label>
              </div>

              <div class="setting-item">
                <div class="setting-info">
                  <h4>Marketing Emails</h4>
                  <p>Receive news about new courses and promotions</p>
                </div>
                <label class="toggle-switch">
                  <input type="checkbox" />
                  <span class="toggle-slider"></span>
                </label>
              </div>

              <div class="setting-item">
                <div class="setting-info">
                  <h4>Community Updates</h4>
                  <p>Get notified about forum replies and mentions</p>
                </div>
                <label class="toggle-switch">
                  <input type="checkbox" checked />
                  <span class="toggle-slider"></span>
                </label>
              </div>
            </div>
          </section>

          <!-- Danger Zone -->
          <section class="settings-section">
            <div class="settings-header danger">
              <lucide-icon [img]="AlertTriangle" [size]="24"></lucide-icon>
              <h2 class="settings-section-title">Danger Zone</h2>
            </div>
            <div class="settings-card danger-card">
              <div class="danger-item">
                <div class="setting-info">
                  <h4>Delete Account</h4>
                  <p>Permanently delete your account and all associated data</p>
                </div>
                <button class="btn-danger">Delete Account</button>
              </div>
            </div>
          </section>
        </div>
      </div>

      <!-- Support Tab -->
      <div class="tab-content" *ngIf="activeTab === 'support'">
        <h1 class="page-title">Support Center</h1>
        <p class="page-subtitle">We're here to help you succeed</p>

        <!-- Quick Help Cards -->
        <div class="support-cards">
          <div class="support-card">
            <div class="support-card-icon">
              <lucide-icon [img]="BookOpen" [size]="28"></lucide-icon>
            </div>
            <h3>Help Center</h3>
            <p>Browse our comprehensive guides and tutorials</p>
          </div>
          <div class="support-card">
            <div class="support-card-icon">
              <lucide-icon [img]="Mail" [size]="28"></lucide-icon>
            </div>
            <h3>Email Support</h3>
            <p>Get personalized help from our support team</p>
          </div>
          <div class="support-card">
            <div class="support-card-icon">
              <lucide-icon [img]="MessageCircle" [size]="28"></lucide-icon>
            </div>
            <h3>Live Chat</h3>
            <p>Chat with us for quick answers to your questions</p>
          </div>
        </div>

        <!-- FAQ Section -->
        <section class="faq-section">
          <h2 class="section-title">Frequently Asked Questions</h2>
          <div class="faq-list">
            <div class="faq-item" *ngFor="let faq of faqs; let i = index" [class.active]="activeFaq === i">
              <button class="faq-question" (click)="toggleFaq(i)">
                <span>{{ faq.question }}</span>
                <lucide-icon [img]="ChevronDown" [size]="20"></lucide-icon>
              </button>
              <div class="faq-answer" *ngIf="activeFaq === i">
                <p>{{ faq.answer }}</p>
              </div>
            </div>
          </div>
        </section>

        <!-- Contact Form -->
        <section class="contact-section">
          <h2 class="section-title">Still need help?</h2>
          <p class="section-description">Send us a message and we'll get back to you within 24 hours</p>

          <form class="contact-form">
            <div class="form-group">
              <label for="subject">Subject</label>
              <input type="text" id="subject" placeholder="How can we help you?" />
            </div>
            <div class="form-group">
              <label for="message">Message</label>
              <textarea id="message" rows="6" placeholder="Describe your issue or question..."></textarea>
            </div>
            <button type="submit" class="submit-btn">
              <lucide-icon [img]="Send" [size]="18"></lucide-icon>
              Send Message
            </button>
          </form>
        </section>

        <!-- Additional Resources -->
        <section class="resources-section">
          <h2 class="section-title">Additional Resources</h2>
          <div class="resources-grid">
            <a href="#" class="resource-link">
              <lucide-icon [img]="FileText" [size]="20"></lucide-icon>
              <span>Documentation</span>
            </a>
            <a href="#" class="resource-link">
              <lucide-icon [img]="Video" [size]="20"></lucide-icon>
              <span>Video Tutorials</span>
            </a>
            <a href="#" class="resource-link">
              <lucide-icon [img]="Users" [size]="20"></lucide-icon>
              <span>Community Forum</span>
            </a>
            <a href="#" class="resource-link">
              <lucide-icon [img]="Download" [size]="20"></lucide-icon>
              <span>Downloads</span>
            </a>
          </div>
        </section>
      </div>
    </div>
  </main>
</div>