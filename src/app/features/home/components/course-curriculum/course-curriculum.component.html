<!-- Course Contents Section (Udemy Style) -->
<section class="course-contents" id="curriculum">
    <div class="container">
        <div class="contents-layout">
            <div class="contents-header">
                <div class="badge">
                    <lucide-icon [img]="BookOpen" class="badge-icon"></lucide-icon>
                    <span>Complete Curriculum</span>
                </div>
                <h2 class="section-title">
                    Course<br />
                    <span class="gradient-text">Curriculum</span>
                </h2>

                <div class="course-stats-summary">
                    <div class="stat-summary-item">
                        <lucide-icon [img]="PlayCircle" class="stat-summary-icon"></lucide-icon>
                        <div>
                            <div class="stat-summary-number">200+</div>
                            <div class="stat-summary-label">Video Lessons</div>
                        </div>
                    </div>
                    <div class="stat-summary-item">
                        <lucide-icon [img]="FileText" class="stat-summary-icon"></lucide-icon>
                        <div>
                            <div class="stat-summary-number">45+</div>
                            <div class="stat-summary-label">PDF Resources</div>
                        </div>
                    </div>
                    <div class="stat-summary-item">
                        <lucide-icon [img]="Infinity" class="stat-summary-icon"></lucide-icon>
                        <div>
                            <div class="stat-summary-number">Lifetime</div>
                            <div class="stat-summary-label">Access</div>
                        </div>
                    </div>
                    <div class="stat-summary-item">
                        <lucide-icon [img]="Users" class="stat-summary-icon"></lucide-icon>
                        <div>
                            <div class="stat-summary-number">24/7</div>
                            <div class="stat-summary-label">Learning Support</div>
                        </div>
                    </div>
                    <div class="stat-summary-item">
                        <lucide-icon [img]="Award" class="stat-summary-icon"></lucide-icon>
                        <div>
                            <div class="stat-summary-number">Certificate</div>
                            <div class="stat-summary-label">Of Completion</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="contents-accordion">
                <div class="accordion-item" *ngFor="let module of course?.modules?.slice(0, 8); let i = index"
                    [class.active]="module.isOpen">
                    <button class="accordion-header" (click)="toggleSection(i)">
                        <div class="accordion-title-wrapper">
                            <lucide-icon [img]="module.isOpen ? ChevronDown : ChevronRight"
                                class="accordion-icon"></lucide-icon>
                            <div>
                                <h3 class="accordion-title">{{ module.title }}</h3>
                                <p class="accordion-meta">{{ module.lessons.length || 0 }} lessons • {{ module.duration
                                    || 'TBD' }}</p>
                            </div>
                        </div>
                        <div class="accordion-badge">{{ i + 1 }}</div>
                    </button>

                    <div class="accordion-content" *ngIf="module.isOpen">
                        <div class="lesson-item" *ngFor="let lesson of module.lessons">
                            <div class="lesson-info">
                                <lucide-icon [img]="lesson.videoUrl ? PlayCircle : FileText"
                                    class="lesson-icon"></lucide-icon>
                                <span class="lesson-title">{{ lesson.title }}</span>
                            </div>
                            <span class="lesson-duration">{{ lesson.duration || 'TBD' }}</span>
                        </div>
                    </div>
                </div>

                <!-- See All Sections Button -->
                <div class="see-all-sections" *ngIf="(course?.modules?.length ?? 0) > 8">
                    <button class="btn-see-all" (click)="openAllSectionsModal()">
                        <lucide-icon [img]="BookOpen" class="btn-icon"></lucide-icon>
                        <span>See All {{ course?.modules?.length }} Sections</span>
                        <lucide-icon [img]="ChevronRight" class="btn-icon"></lucide-icon>
                    </button>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- All Sections Modal -->
<div class="modal-overlay" *ngIf="isAllSectionsModalOpen" (click)="closeAllSectionsModal()">
    <div class="modal-dialog modal-sections" (click)="$event.stopPropagation()">
        <div class="modal-header-sections">
            <div>
                <h3 class="modal-title-sections">Complete Course Curriculum</h3>
                <p class="modal-subtitle-sections">{{ course?.modules?.length || 0 }} modules • {{ course?.totalLessons
                    || 0 }}
                    lessons</p>
            </div>
            <button class="modal-close" (click)="closeAllSectionsModal()" aria-label="Close">
                ✕
            </button>
        </div>
        <div class="modal-content-sections">
            <div class="contents-accordion">
                <div class="accordion-item" *ngFor="let module of course?.modules; let i = index"
                    [class.active]="module.isOpen">
                    <button class="accordion-header" (click)="toggleSection(i)">
                        <div class="accordion-title-wrapper">
                            <lucide-icon [img]="module.isOpen ? ChevronDown : ChevronRight"
                                class="accordion-icon"></lucide-icon>
                            <div>
                                <h3 class="accordion-title">{{ module.title }}</h3>
                                <p class="accordion-meta">{{ module.lessons.length || 0 }} lessons • {{ module.duration
                                    || 'TBD' }}</p>
                            </div>
                        </div>
                        <div class="accordion-badge">{{ i + 1 }}</div>
                    </button>

                    <div class="accordion-content" *ngIf="module.isOpen">
                        <div class="lesson-item" *ngFor="let lesson of module.lessons">
                            <div class="lesson-info">
                                <lucide-icon [img]="lesson.videoUrl ? PlayCircle : FileText"
                                    class="lesson-icon"></lucide-icon>
                                <span class="lesson-title">{{ lesson.title }}</span>
                            </div>
                            <span class="lesson-duration">{{ lesson.duration || 'TBD' }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
