<!-- Pricing Section -->
<section class="pricing" id="enroll">
  <div class="container-pricing">
    <div class="section-header-center">
      <!-- Dynamic badge with active coupon -->
      <div class="badge-glow" *ngIf="activeCoupon">
        <lucide-icon [img]="Tag" class="badge-icon"></lucide-icon>
        <span>{{ discountBadgeText }} - {{ activeCoupon.code }}</span>
      </div>

      <!-- Default badge when no coupon -->
      <div class="badge-glow" *ngIf="!activeCoupon && !isCheckingCoupon">
        <lucide-icon [img]="Sparkles" class="badge-icon"></lucide-icon>
        <span>Limited Time Offer</span>
      </div>

      <h2 class="section-title-lg">
        Transform Your Trading <span class="gradient-text">Today</span>
      </h2>
      <p class="section-description">
        Join 6,000+ successful students. Lifetime access. One-time payment.
      </p>
    </div>

    <!-- 2-Column Bento Grid -->
    <div class="pricing-bento-grid">
      <!-- Left Column: Price Card -->
      <div class="pricing-price-card glass-card">
        <div class="pricing-glow"></div>

        <!-- Dynamic Discount Badge (shows if coupon active) -->
        <div class="pricing-badge-epic" *ngIf="activeCoupon">
          <lucide-icon [img]="Tag" class="badge-icon-sm"></lucide-icon>
          <span>{{ discountBadgeText }} - {{ activeCoupon.code }}</span>
        </div>

        <!-- Default Badge (shows if no coupon) -->
        <div class="pricing-badge-epic" *ngIf="!activeCoupon && !isCheckingCoupon">
          <lucide-icon [img]="Award" class="badge-icon-sm"></lucide-icon>
          <span>Limited Offer</span>
        </div>

        <h3 class="pricing-plan-title">Complete Forex Mastery</h3>

        <div class="price-display">
          <!-- WITH COUPON: Show $149 â†’ $XX.XX -->
          <div *ngIf="activeCoupon">
            <div class="price-old">
              <span class="strike-through">${{ originalPrice }}</span>
              <span class="save-badge">Save ${{ totalSavings.toFixed(0) }}</span>
            </div>
            <div class="price-current">
              <span class="currency">$</span>
              <span class="amount">{{ finalPrice.toFixed(0) }}</span>
              <span class="period">.{{ (finalPrice % 1 * 100).toFixed(0).padStart(2, '0') }}</span>
            </div>
          </div>

          <!-- WITHOUT COUPON: Show $149 -->
          <div *ngIf="!activeCoupon">
            <div class="price-current">
              <span class="currency">$</span>
              <span class="amount">{{ originalPrice }}</span>
              <span class="period">.00</span>
            </div>
          </div>

          <p class="price-subtitle">One-time payment â€¢ Lifetime access</p>
        </div>

        <!-- Show "Start Learning" button if user is enrolled -->
        <div *ngIf="isUserEnrolled && !isCheckingEnrollment">
          <div class="enrollment-status">
            <lucide-icon [img]="CheckCircle" class="enrollment-icon"></lucide-icon>
            <span>You're already enrolled! ðŸŽ‰</span>
          </div>
          <button class="btn-enroll-epic btn-enrolled" routerLink="/dashboard/courses">
            <span>Start Learning</span>
            <lucide-icon [img]="ArrowRight" class="btn-icon-epic"></lucide-icon>
          </button>
        </div>

        <!-- Show "Enroll Now" button if user is NOT enrolled -->
        <button *ngIf="!isUserEnrolled && !isCheckingEnrollment" class="btn-enroll-epic" routerLink="/checkout">
          <span *ngIf="activeCoupon">Enroll Now - Save ${{ totalSavings.toFixed(0) }}</span>
          <span *ngIf="!activeCoupon">Enroll Now</span>
          <lucide-icon [img]="ArrowRight" class="btn-icon-epic"></lucide-icon>
        </button>

        <div class="trust-signals">
          <div class="trust-item">
            <lucide-icon [img]="Shield" class="trust-icon-sm"></lucide-icon>
            <span>30-Day Guarantee</span>
          </div>
          <div class="trust-item">
            <lucide-icon [img]="Lock" class="trust-icon-sm"></lucide-icon>
            <span>Secure Payment</span>
          </div>
          <div class="trust-item">
            <lucide-icon [img]="Zap" class="trust-icon-sm"></lucide-icon>
            <span>Instant Access</span>
          </div>
        </div>
      </div>

      <!-- Right Column: Value Grid (2x4) -->
      <div class="pricing-value-grid">
        <div class="value-card glass-card">
          <div class="value-icon-wrapper">
            <lucide-icon [img]="PlayCircle" class="value-icon"></lucide-icon>
          </div>
          <div class="value-text">
            <div class="value-title">200+ HD Video Lessons</div>
            <div class="value-description">Comprehensive education</div>
          </div>
        </div>

        <div class="value-card glass-card">
          <div class="value-icon-wrapper">
            <lucide-icon [img]="Infinity" class="value-icon"></lucide-icon>
          </div>
          <div class="value-text">
            <div class="value-title">Lifetime Access</div>
            <div class="value-description">Learn at your own pace</div>
          </div>
        </div>

        <div class="value-card glass-card">
          <div class="value-icon-wrapper">
            <lucide-icon [img]="MessageCircle" class="value-icon"></lucide-icon>
          </div>
          <div class="value-text">
            <div class="value-title">24/7 Learning Support</div>
            <div class="value-description">Help whenever you need</div>
          </div>
        </div>

        <div class="value-card glass-card">
          <div class="value-icon-wrapper">
            <lucide-icon [img]="ClipboardCheck" class="value-icon"></lucide-icon>
          </div>
          <div class="value-text">
            <div class="value-title">Trading Plan Templates</div>
            <div class="value-description">Risk management tools</div>
          </div>
        </div>

        <div class="value-card glass-card">
          <div class="value-icon-wrapper">
            <lucide-icon [img]="FileText" class="value-icon"></lucide-icon>
          </div>
          <div class="value-text">
            <div class="value-title">45+ Downloadable PDFs</div>
            <div class="value-description">Reference guides & checklists</div>
          </div>
        </div>

        <div class="value-card glass-card">
          <div class="value-icon-wrapper">
            <lucide-icon [img]="CheckCircle" class="value-icon"></lucide-icon>
          </div>
          <div class="value-text">
            <div class="value-title">Skill Tests & Quizzes</div>
            <div class="value-description">Track your progress</div>
          </div>
        </div>

        <div class="value-card glass-card">
          <div class="value-icon-wrapper">
            <lucide-icon [img]="Award" class="value-icon"></lucide-icon>
          </div>
          <div class="value-text">
            <div class="value-title">Certificate of Completion</div>
            <div class="value-description">Showcase your achievement</div>
          </div>
        </div>

        <div class="value-card glass-card">
          <div class="value-icon-wrapper">
            <lucide-icon [img]="Smartphone" class="value-icon"></lucide-icon>
          </div>
          <div class="value-text">
            <div class="value-title">Access on Any Device</div>
            <div class="value-description">Desktop, tablet, or mobile</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Money-Back Guarantee -->
    <div class="money-back-guarantee">
      <div class="guarantee-badge">
        <lucide-icon [img]="ShieldCheck" class="guarantee-icon"></lucide-icon>
      </div>
      <div class="guarantee-content">
        <h4>100% Risk-Free 30-Day Money-Back Guarantee</h4>
        <p>Try the course for 30 days. If you're not completely satisfied, get a full refund. No questions
          asked.</p>
      </div>
    </div>

    <!-- FAQ Accordion (Below Bento Grid) -->
    <div class="faq-section-standalone">
      <h4 class="faq-heading">Frequently Asked Questions</h4>
      <div class="faq-accordion">
        <div class="faq-item" *ngFor="let faq of faqs; let i = index" [class.active]="faq.isOpen">
          <button class="faq-question" (click)="toggleFaq(i)">
            <span>{{ faq.question }}</span>
            <lucide-icon [img]="faq.isOpen ? Minus : Plus" class="faq-icon"></lucide-icon>
          </button>
          <div class="faq-answer" *ngIf="faq.isOpen">
            <p>{{ faq.answer }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>